<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-app.js" defer ></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-auth.js" defer ></script>
  <script src="bower_components/firebaseui/dist/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="bower_components/firebaseui/dist/firebaseui.css" />
  <title>Google auth</title>
</head>
<body>
    <main>
      <section>
          <div>Hola</div>
      </section>
    </main>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
          const firebaseConfig = {
              apiKey: "AIzaSyDQlTL8zvk6DcHpQFqVSypYmj7hZUkBx7I",
              authDomain: "quiet-castle-61424.herokuapp.com",
              projectId: "itacatalgo",
              storageBucket: "itacatalgo.appspot.com",
              messagingSenderId: "543664139030",
              appId: "1:543664139030:web:86a26fa7848090bc69fe37"
          }

          // inicializamos firebase
          firebase.initializeApp(firebaseConfig);
          firebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE);

        let provider = new firebase.auth.GoogleAuthProvider();
        provider.addScope('https://www.googleapis.com/auth/contacts.readonly');
        firebase.auth().signInWithRedirect(provider);
        
        firebase.auth()
        .getRedirectResult()
        .then((result) => {
          if (result.credential) {
            /** @type {firebase.auth.OAuthCredential} */
            var credential = result.credential;
            alert("HOla", credential)
            // This gives you a Google Access Token. You can use it to access the Google API.
            var token = credential.accessToken;
            console.log(token)
            // ...
          }
          // The signed-in user info.
          var user = result.user;
        }).catch((error) => {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // The email of the user's account used.
          var email = error.email;
          // The firebase.auth.AuthCredential type that was used.
          var credential = error.credential;
          // ...
        });

        })

        
    </script>

</body>
</html>